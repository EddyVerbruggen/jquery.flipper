/* jquery.flipper (c) MrKMG 2012 */
(function(a){var b={init:function(b){return this.each(function(){var c=a(this),d=c.data("flipper"),e=c.text();if(!d){var f=a.extend({type:"fall",speed:"normal",queueSuper:true},b);c.addClass("flipper").addClass("fl-animate").addClass("fl-"+f.type).addClass("fl-"+f.speed);c.css("line-height",c.height()+1+"px");var g=a('<span class="fl-new fl-top fl-num"></span>');var h=a('<span class="fl-new fl-bottom fl-num"></span>');var i=a('<span class="fl-show fl-top fl-num">'+e+"</span>");var j=a('<span class="fl-show fl-bottom fl-num">'+e+"</span>");c.html("").append(g,h,i,j);c.data("flipper",{new1:g,new2:h,cur1:i,cur2:j,type:f.type,speed:f.speed,queueSuper:f.queueSuper,running:false,insuper:false,presuperspeed:null,queue:[]})}})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("flipper");c.flipper.remove();b.removeData("flipper")})},option:function(b,c){if(b=="speed"){var d=a(this),e=d.data().flipper;var f=e.speed;e.speed=c;d.removeClass("fl-"+f).addClass("fl-"+c);d.data("flipper",e);return true}else if(b=="type"){var d=a(this),e=d.data().flipper;var g=e.type;e.type=c;d.removeClass("fl-"+g).addClass("fl-"+c);d.data("flipper",e);return true}else{return false}},update:function(c,d){var e=a(this);var f=e.data().flipper;if(f.running){f.queue.push([c,d]);e.data("flipper",f);return}else{f.running=true;b._process(this,c,d)}},_process:function(d,e,f){var g=a(d);var h=g.data().flipper;g.data("flipper",h);console.log(h.insuper,h.queue.length);if(h.queueSuper&&!h.insuper&&h.queue.length){var i=h.speed;h.speed="super";g.removeClass("fl-"+i).addClass("fl-super");h.oldspeed=i;h.insuper=true;g.data("flipper",h)}else if(h.queueSuper&&h.insuper&&!h.queue.length){h.speed=h.oldspeed;g.removeClass("fl-super").addClass("fl-"+h.speed);h.insuper=false;g.data("flipper",h)}setTimeout(function(){c[h.type](d,e,function(){if(h.queue.length){var a=h.queue.shift();setTimeout(function(){b._process(d,a[0],a[1])},1);if(typeof f=="function")f(false)}else{if(typeof f=="function")f(true);h.running=false;g.data("flipper",h)}})},1)},clearqueue:function(){var b=a(this);var c=b.data().flipper;c.queue.length=0;b.data("flipper",c)}};var c={fall:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(c);f.new2.text(c);if(f.speed=="slow")var g=2e3;else if(f.speed=="normal")var g=1e3;else if(f.speed=="fast")var g=500;else if(f.speed=="super")var g=50;setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.cur2.text(c);f.new1.text("");f.new2.text("");e.removeClass("fl-go");d()},g)},rise:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(c);f.new2.text(c);if(f.speed=="slow")var g=2e3;else if(f.speed=="normal")var g=1e3;else if(f.speed=="fast")var g=500;else if(f.speed=="super")var g=50;setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.cur2.text(c);f.new1.text("");f.new2.text("");e.removeClass("fl-go");d()},g)},clap:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(c);f.new2.text(f.cur2.text());f.cur2.text(c);if(f.speed=="slow")var g=2e3;else if(f.speed=="normal")var g=1e3;else if(f.speed=="fast")var g=500;else if(f.speed=="super")var g=50;setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.new1.text("");f.new2.text("");e.removeClass("fl-go");d()},g)},slide:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(c);if(f.speed=="slow"){var g=2e3;var h=1e3}else if(f.speed=="normal"){var g=1e3;var h=500}else if(f.speed=="fast"){var g=500;var h=250}else if(f.speed=="super"){var g=50;var h=25}setTimeout(function(){e.removeClass("fl-go").addClass("fl-zfix");f.cur2.text(c)},h);setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.new1.text("");e.removeClass("fl-zfix");d()},g)},open:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(c);f.new2.text(c);if(f.speed=="slow"){var g=2e3;var h=1e3}else if(f.speed=="normal"){var g=1e3;var h=500}else if(f.speed=="fast"){var g=500;var h=250}else if(f.speed=="super"){var g=50;var h=25}setTimeout(function(){e.addClass("fl-zfix")},h);setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.cur2.text(c);f.new1.text("");f.new2.text("");e.removeClass("fl-go").removeClass("fl-zfix");d()},g)},close:function(b,c,d){var e=a(b);var f=e.data().flipper;e.addClass("fl-animate");e.addClass("fl-go");f.new1.text(f.cur1.text());f.new2.text(f.cur2.text());f.cur1.text(c);f.cur2.text(c);if(f.speed=="slow"){var g=2e3;var h=1e3}else if(f.speed=="normal"){var g=1e3;var h=500}else if(f.speed=="fast"){var g=500;var h=250}else if(f.speed=="super"){var g=50;var h=25}e.addClass("fl-zfix");setTimeout(function(){e.removeClass("fl-zfix")},h);setTimeout(function(){e.removeClass("fl-animate");f.cur1.text(c);f.cur2.text(c);f.new1.text("");f.new2.text("");e.removeClass("fl-go");d()},g)}};a.fn.flipper=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist on jQuery.flipper")}}})(jQuery)
