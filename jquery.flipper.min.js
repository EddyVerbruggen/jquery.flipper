/* jquery.flipper (c) MrKMG 2012 */
(function(a){var b={init:function(b){return this.each(function(){var c=a(this),d=c.data("flipper"),e=c.text();if(!d){var f=a.extend({type:"fall",speed:"normal"},b);c.addClass("flipper").addClass("fl-animate").addClass("fl-"+f.type).addClass("fl-"+f.speed);c.css("line-height",c.height()+1+"px");var g=a('<span class="fl-new fl-top fl-num"></span>');var h=a('<span class="fl-new fl-bottom fl-num"></span>');var i=a('<span class="fl-show fl-top fl-num">'+e+"</span>");var j=a('<span class="fl-show fl-bottom fl-num">'+e+"</span>");c.html("").append(g,h,i,j);c.data("flipper",{new1:g,new2:h,cur1:i,cur2:j,type:f.type,speed:f.speed,running:false,queue:[]})}})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("flipper");c.flipper.remove();b.removeData("flipper")})},option:function(b,c){if(b=="speed"){var d=a(this),e=d.data().flipper;var f=e.speed;e.speed=c;d.removeClass("fl-"+f).addClass("fl-"+c);d.data("flipper",e);return true}else if(b=="type"){var d=a(this),e=d.data().flipper;var g=e.type;e.type=c;d.removeClass("fl-"+g).addClass("fl-"+c);d.data("flipper",e);return true}else{return false}},update:function(b){var c=a(this);var d=c.data().flipper;if(d.running){d.queue.push(b);c.data("flipper",d);return}d.running=true;c.data("flipper",d);c.addClass("fl-animate");c.addClass("fl-go");var e=function(){d.running=false;if(d.queue.length){setTimeout(function(){c.flipper("update",d.queue.shift())},1);c.data("flipper",d)}};switch(d.type){case"fall":c.data().flipper.new1.text(b);c.data().flipper.new2.text(b);if(d.speed=="slow")var f=2e3;else if(d.speed=="normal")var f=1e3;else if(d.speed=="fast")var f=500;setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.cur2.text(b);c.data().flipper.new1.text("");c.data().flipper.new2.text("");c.removeClass("fl-go");e()},f);break;case"rise":c.data().flipper.new1.text(b);c.data().flipper.new2.text(b);if(d.speed=="slow")var f=2e3;else if(d.speed=="normal")var f=1e3;else if(d.speed=="fast")var f=500;setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.cur2.text(b);c.data().flipper.new1.text("");c.data().flipper.new2.text("");c.removeClass("fl-go");e()},f);break;case"slide":c.data().flipper.new1.text(b);if(d.speed=="slow"){var g=2e3;var h=1e3}else if(d.speed=="normal"){var g=1e3;var h=500}else if(d.speed=="fast"){var g=500;var h=250}setTimeout(function(){c.removeClass("fl-go").addClass("fl-zfix");c.data().flipper.cur2.text(b)},h);setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.new1.text("");c.removeClass("fl-zfix");e()},g);break;case"clap":c.data().flipper.new1.text(b);c.data().flipper.new2.text(c.data().flipper.cur2.text());c.data().flipper.cur2.text(b);if(d.speed=="slow")var f=2e3;else if(d.speed=="normal")var f=1e3;else if(d.speed=="fast")var f=500;setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.new1.text("");c.data().flipper.new2.text("");c.removeClass("fl-go");e()},f);break;case"open":c.data().flipper.new1.text(b);c.data().flipper.new2.text(b);if(d.speed=="slow"){var g=2e3;var h=1e3}else if(d.speed=="normal"){var g=1e3;var h=500}else if(d.speed=="fast"){var g=500;var h=250}setTimeout(function(){c.addClass("fl-zfix")},h);setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.cur2.text(b);c.data().flipper.new1.text("");c.data().flipper.new2.text("");c.removeClass("fl-go").removeClass("fl-zfix");e()},g);break;case"close":c.data().flipper.new1.text(c.data().flipper.cur1.text());c.data().flipper.new2.text(c.data().flipper.cur2.text());c.data().flipper.cur1.text(b);c.data().flipper.cur2.text(b);if(d.speed=="slow"){var g=2e3;var h=1e3}else if(d.speed=="normal"){var g=1e3;var h=500}else if(d.speed=="fast"){var g=500;var h=250}c.addClass("fl-zfix");setTimeout(function(){c.removeClass("fl-zfix")},h);setTimeout(function(){c.removeClass("fl-animate");c.data().flipper.cur1.text(b);c.data().flipper.cur2.text(b);c.data().flipper.new1.text("");c.data().flipper.new2.text("");c.removeClass("fl-go");e()},g);break}}};a.fn.flipper=function(c){if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist on jQuery.flipper")}}})(jQuery)
